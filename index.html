<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã</title>

    <meta property="og:title" content="‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã">
    <meta property="og:description" content="‡¶Ü‡¶Æ‡¶ø ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞ ‡¶ï‡ßü‡¶ü‡¶ø ‡¶ú‡ßá‡¶≤‡¶æ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø ‡¶§‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø‡¶ì ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§">
    <meta property="og:image" content="https://images.unsplash.com/photo-1582650625119-3a31f8fa2699">
    <meta property="og:type" content="website">

    <link href="https://fonts.googleapis.com/css2?family=Anek+Bangla:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #006a4e;
            --bg-color: #f8fafc;
            --card-bg: #ffffff;
            --text-main: #1e293b;
            --border: #e2e8f0;
        }
        body { font-family: 'Anek Bangla', sans-serif; background-color: var(--bg-color); color: var(--text-main); margin: 0; padding: 0; }
        .sticky-header { position: sticky; top: 0; background-color: var(--bg-color); z-index: 1000; padding: 10px 15px 5px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); border-bottom: 1px solid var(--border); }
        .container { max-width: 800px; margin: 0 auto; padding: 0 15px 30px; }
        header h1 { text-align: center; margin: 0 0 10px; font-size: 1.3rem; }
        .progress-wrapper { position: relative; margin: 30px 0 10px; background: var(--border); height: 8px; border-radius: 10px; }
        .progress-bar { height: 100%; background: linear-gradient(270deg, #10b981, var(--primary-color)); width: 0%; border-radius: 10px; transition: width 0.4s; position: absolute; right: 0; }
        #walker-container { position: absolute; right: 100%; top: -28px; transform: translateX(50%); transition: 0.4s; }
        #walker-img { width: 22px; height: 22px; object-fit: contain; }
        .stats-summary { display: flex; justify-content: space-between; font-weight: bold; padding: 6px 12px; border-radius: 10px; background: var(--card-bg); border: 1px solid var(--border); font-size: 0.85rem; }
        
        /* ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶°‡¶ø‡¶ú‡¶æ‡¶á‡¶® */
        .badge-container { display: flex; justify-content: center; gap: 5px; margin-top: 10px; flex-wrap: wrap; }
        .badge { padding: 4px 8px; background: var(--card-bg); border: 1px solid var(--border); border-radius: 20px; font-size: 0.65rem; opacity: 0.3; filter: grayscale(1); display: flex; align-items: center; gap: 3px; transition: 0.3s; }
        .badge.active { opacity: 1; filter: grayscale(0); border-color: var(--primary-color); background: #dcfce7; font-weight: bold; }
        .badge.special { border-color: #f59e0b; }
        .badge.special.active { background: #fef3c7; border-color: #f59e0b; color: #b45309; box-shadow: 0 2px 4px rgba(245, 158, 11, 0.2); }

        .division-header { display: flex; justify-content: space-between; margin: 20px 0 8px; padding-left: 10px; border-left: 5px solid var(--primary-color); font-size: 1rem; }
        .district-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(105px, 1fr)); gap: 8px; }
        .district-card { background: var(--card-bg); padding: 10px; border-radius: 8px; border: 1px solid var(--border); cursor: pointer; display: flex; align-items: center; font-size: 0.85rem; transition: 0.2s; }
        .district-card.completed { background: #dcfce7; border-color: var(--primary-color); color: var(--primary-color); font-weight: bold; }
        .checkbox { width: 14px; height: 14px; border: 2px solid #cbd5e1; border-radius: 3px; margin-right: 8px; display: flex; align-items: center; justify-content: center; }
        .completed .checkbox { background: var(--primary-color); border-color: var(--primary-color); }
        .completed .checkbox::after { content: '‚úì'; color: white; font-size: 10px; }
        
        .btn { background: var(--primary-color); color: white; border: none; padding: 10px 18px; border-radius: 8px; cursor: pointer; font-family: 'Anek Bangla'; font-size: 0.9rem; margin: 5px; transition: 0.2s; }
        .btn:active { transform: scale(0.95); }
        .share-trigger { background: #f59e0b; width: 100%; margin: 15px 0; font-weight: bold; font-size: 1rem; color: #fff; box-shadow: 0 4px 0 #d97706; }
        
        .backup-section { background: linear-gradient(135deg, #006a4e, #10b981); color: white; padding: 20px; border-radius: 15px; margin-top: 30px; text-align: center; }
        .help-box { text-align: left; background: #ffffff; padding: 15px; border-radius: 12px; margin-top: 15px; border: 1px solid #e2e8f0; font-size: 0.85rem; line-height: 1.6; color: #475569; }
        .help-box b { color: var(--primary-color); }

        #shareModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; justify-content: center; align-items: center; }
        .card-preview { background: linear-gradient(135deg, #006a4e, #10b981); color: white; padding: 30px; border-radius: 20px; width: 85%; max-width: 350px; text-align: center; border: 4px solid #fff; }
        .card-preview .count { font-size: 4rem; font-weight: 800; margin: 10px 0; }
        .card-preview .rank { background: rgba(255,255,255,0.2); padding: 5px 15px; border-radius: 20px; display: inline-block; margin-bottom: 20px; }

        #celebration { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--card-bg); padding: 25px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.3); text-align: center; z-index: 4000; border: 3px solid var(--primary-color); width: 80%; max-width: 300px; }
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 3999; }
    </style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<div id="shareModal" onclick="this.style.display='none'">
    <div class="card-preview" onclick="event.stopPropagation()">
        <p style="font-size: 1.1rem; margin-bottom: 0;">‡¶Ü‡¶Æ‡¶ø ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂‡ßá‡¶∞</p>
        <div class="count" id="cardCount">0</div>
        <p style="font-size: 1.1rem; margin-top: 0;">‡¶ü‡¶ø ‡¶ú‡ßá‡¶≤‡¶æ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ï‡¶∞‡ßá‡¶õ‡¶ø!</p>
        <div class="rank" id="cardRank">‡¶®‡¶¨‡¶ø‡¶∂</div>
        <div style="font-size: 0.8rem; margin-top: 10px; opacity: 0.8;">üìç ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã</div>
        <p style="font-size: 0.7rem; margin-top: 20px; color: #fff;">(‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡¶∂‡¶ü ‡¶®‡¶ø‡¶®)</p>
        <button class="btn" style="background:white; color:black;" onclick="document.getElementById('shareModal').style.display='none'">‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®</button>
    </div>
</div>

<div id="celebration">
    <h2 style="color: var(--primary-color); margin-top: 0;">‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£! üèÜ</h2>
    <p id="celebMsg" style="font-weight: bold; margin: 10px 0; font-size: 0.9rem;"></p>
    <button onclick="closeCeleb()" class="btn">‡¶ö‡¶æ‡¶≤‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶®</button>
</div>

<div class="sticky-header">
    <div style="max-width: 800px; margin: 0 auto;">
        <header><h1>üáßüá© ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡ßã</h1></header>
        <div class="stats-summary">
            <span>‡¶ò‡ßÅ‡¶∞‡ßá‡¶õ‡¶ø: <span id="vCount">0</span>/64</span>
            <span>‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø: <span id="percent">0%</span></span>
        </div>
        <div class="progress-wrapper">
            <div class="progress-bar" id="progressBar">
                <div id="walker-container"><img id="walker-img" src="https://cdn-icons-png.flaticon.com/512/10815/10815893.png"></div>
            </div>
        </div>
        <div class="badge-container">
            <div class="badge" id="badge-1">‡¶®‡¶¨‡¶ø‡¶∂</div>
            <div class="badge" id="badge-10">‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï</div>
            <div class="badge" id="badge-30">‡¶Ö‡¶≠‡¶ø‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡ßÄ</div>
            <div class="badge" id="badge-50">‡¶ü‡ßç‡¶∞‡¶æ‡¶≠‡ßá‡¶≤‡¶æ‡¶∞</div>
            <div class="badge" id="badge-64">‡¶∞‡¶æ‡¶ú‡¶æ</div>
            <div class="badge special" id="badge-hill">‚õ∞Ô∏è ‡¶π‡¶ø‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</div>
            <div class="badge special" id="badge-beach">üèñÔ∏è ‡¶¨‡¶ø‡¶ö ‡¶≤‡¶æ‡¶≠‡¶æ‡¶∞</div>
        </div>
    </div>
</div>

<div class="container">
    <button class="btn share-trigger" onclick="openShareCard()"> ‡¶∂‡ßá‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>

    <div id="mainContent"></div>

    <div class="backup-section">
        <h3 style="margin-top:0; font-size:1.1rem;">üíæ ‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶ ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®</h3>
        <button class="btn" onclick="exportData()">‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶ï‡ßã‡¶° ‡¶®‡¶ø‡¶®</button>
        <button class="btn" style="background:#64748b" onclick="importData()">‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶®</button>
        <button class="btn" style="background:#ef4444" onclick="resetData()">‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>

        <div class="help-box">
            <h4 style="margin: 0 0 10px 0; color: var(--primary-color);">üí° ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ì ‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡ßá‡¶∂‡¶ø‡¶ï‡¶æ</h4>
            <b>‚ùì ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶ï‡ßã‡¶° ‡¶ï‡ßÄ?</b><br>
            ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶è‡¶ï‡¶ü‡¶ø <b>"‡¶°‡¶ø‡¶ú‡¶ø‡¶ü‡¶æ‡¶≤ ‡¶ö‡¶æ‡¶¨‡¶ø"</b>‡•§ ‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ ‡¶¨‡ßç‡¶∞‡¶æ‡¶â‡¶ú‡¶æ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡¶æ‡¶ù‡ßá‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶Ø‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá, ‡¶§‡¶æ‡¶á ‡¶è‡¶á ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶ï‡ßá ‡¶∏‡¶æ‡¶π‡¶æ‡¶Ø‡ßç‡¶Ø ‡¶ï‡¶∞‡¶¨‡ßá‡•§<br><br>

            <b>‚úÖ ‡¶ï‡ßÄ‡¶≠‡¶æ‡¶¨‡ßá ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?</b><br>
            ‡ßß. <b>‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶®‡¶ø‡¶®:</b> ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ú‡ßá‡¶≤‡¶æ ‡¶ò‡ßã‡¶∞‡¶æ‡¶∞ ‡¶™‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§<br>
            ‡ß®. <b>‡¶∞‡¶ø‡¶∏‡ßç‡¶ü‡ßã‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®:</b> ‡¶Ø‡¶¶‡¶ø ‡¶ï‡¶ñ‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶π‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º, ‡¶§‡¶¨‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡¶ø‡¶≤‡ßá‡¶á ‡¶∏‡¶¨ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá‡•§
        </div>
    </div>
</div>

<script>
    const divisions = {
        "‡¶¢‡¶æ‡¶ï‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¢‡¶æ‡¶ï‡¶æ", "‡¶´‡¶∞‡¶ø‡¶¶‡¶™‡ßÅ‡¶∞", "‡¶ó‡¶æ‡¶ú‡ßÄ‡¶™‡ßÅ‡¶∞", "‡¶ó‡ßã‡¶™‡¶æ‡¶≤‡¶ó‡¶û‡ßç‡¶ú", "‡¶ï‡¶ø‡¶∂‡ßã‡¶∞‡¶ó‡¶û‡ßç‡¶ú", "‡¶Æ‡¶æ‡¶¶‡¶æ‡¶∞‡ßÄ‡¶™‡ßÅ‡¶∞", "‡¶Æ‡¶æ‡¶®‡¶ø‡¶ï‡¶ó‡¶û‡ßç‡¶ú", "‡¶Æ‡ßÅ‡§®‡•ç‡¶∏‡ßÄ‡¶ó‡¶û‡ßç‡¶ú", "‡¶®‡¶æ‡¶∞‡¶æ‡¶Ø‡¶º‡¶£‡¶ó‡¶û‡ßç‡¶ú", "‡¶®‡¶∞‡¶∏‡¶ø‡¶Ç‡¶¶‡ßÄ", "‡¶∞‡¶æ‡¶ú‡¶¨‡¶æ‡¶°‡¶º‡ßÄ", "‡¶∂‡¶∞‡ßÄ‡¶Ø‡¶º‡¶§‡¶™‡ßÅ‡¶∞", "‡¶ü‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶á‡¶≤"],
        "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¨‡¶æ‡¶®‡ßç‡¶¶‡¶∞‡¶¨‡¶æ‡¶®", "‡¶¨‡ßç‡¶∞‡¶æ‡¶π‡ßç‡¶Æ‡¶£‡¶¨‡¶æ‡¶°‡¶º‡¶ø‡¶Ø‡¶º‡¶æ", "‡¶ö‡¶æ‡¶Å‡¶¶‡¶™‡ßÅ‡¶∞", "‡¶ö‡¶ü‡ßç‡¶ü‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", "‡¶ï‡ßÅ‡¶Æ‡¶ø‡¶≤‡ßç‡¶≤‡¶æ", "‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", "‡¶´‡ßá‡¶®‡ßÄ", "‡¶ñ‡¶æ‡¶ó‡¶°‡¶º‡¶æ‡¶õ‡¶°‡¶º‡¶ø", "‡¶≤‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡ßÄ‡¶™‡ßÅ‡¶∞", "‡¶®‡ßã‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", "‡¶∞‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶Æ‡¶æ‡¶ü‡¶ø"],
        "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¨‡¶ó‡ßÅ‡¶°‡¶º‡¶æ", "‡¶ú‡¶Ø‡¶º‡¶™‡ßÅ‡¶∞‡¶π‡¶æ‡¶ü", "‡¶®‡¶ì‡¶ó‡¶æ‡¶Å", "‡¶®‡¶æ‡¶ü‡ßã‡¶∞", "‡¶ö‡¶æ‡¶Å‡¶™‡¶æ‡¶á‡¶®‡¶¨‡¶æ‡¶¨‡¶ó‡¶û‡ßç‡¶ú", "‡¶™‡¶æ‡¶¨‡¶®‡¶æ", "‡¶∞‡¶æ‡¶ú‡¶∂‡¶æ‡¶π‡ßÄ", "‡¶∏‡¶ø‡¶∞‡¶æ‡¶ú‡¶ó‡¶û‡ßç‡¶ú"],
        "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¨‡¶æ‡¶ó‡ßá‡¶∞‡¶π‡¶æ‡¶ü", "‡¶ö‡ßÅ‡¶Ø‡¶º‡¶æ‡¶°‡¶æ‡¶ô‡ßç‡¶ó‡¶æ", "‡¶Ø‡¶∂‡ßã‡¶∞", "‡¶ù‡¶ø‡¶®‡¶æ‡¶á‡¶¶‡¶π", "‡¶ñ‡ßÅ‡¶≤‡¶®‡¶æ", "‡¶ï‡ßÅ‡¶∑‡ßç‡¶ü‡¶ø‡¶Ø‡¶º‡¶æ", "‡¶Æ‡¶æ‡¶ó‡ßÅ‡¶∞‡¶æ", "‡¶Æ‡ßá‡¶π‡ßá‡¶∞‡¶™‡ßÅ‡¶∞", "‡¶®‡¶°‡¶º‡¶æ‡¶á‡¶≤", "‡¶∏‡¶æ‡¶§‡¶ï‡ßç‡¶∑‡ßÄ‡¶∞‡¶æ"],
        "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¨‡¶∞‡¶ó‡ßÅ‡¶®‡¶æ", "‡¶¨‡¶∞‡¶ø‡¶∂‡¶æ‡¶≤", "‡¶≠‡ßã‡¶≤‡¶æ", "‡¶ù‡¶æ‡¶≤‡¶ï‡¶æ‡¶†‡¶ø", "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", "‡¶™‡¶ø‡¶∞‡ßã‡¶ú‡¶™‡ßÅ‡¶∞"],
        "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶π‡¶¨‡¶ø‡¶ó‡¶û‡ßç‡¶ú", "‡¶Æ‡ßå‡¶≤‡¶≠‡ßÄ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", "‡¶∏‡ßÅ‡¶®‡¶æ‡¶Æ‡¶ó‡¶û‡ßç‡¶ú", "‡¶∏‡¶ø‡¶≤‡ßá‡¶ü"],
        "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞ ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶¶‡¶ø‡¶®‡¶æ‡¶ú‡¶™‡ßÅ‡¶∞", "‡¶ó‡¶æ‡¶á‡¶¨‡¶æ‡¶®‡ßç‡¶ß‡¶æ", "‡¶ï‡ßÅ‡¶°‡¶º‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ", "‡¶≤‡¶æ‡¶≤‡¶Æ‡¶®‡¶ø‡¶∞‡¶π‡¶æ‡¶ü", "‡¶®‡ßÄ‡¶≤‡¶´‡¶æ‡¶Æ‡¶æ‡¶∞‡ßÄ", "‡¶™‡¶û‡ßç‡¶ö‡¶ó‡¶°‡¶º", "‡¶∞‡¶Ç‡¶™‡ßÅ‡¶∞", "‡¶†‡¶æ‡¶ï‡ßÅ‡¶∞‡¶ó‡¶æ‡¶Å‡¶ì"],
        "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó": ["‡¶ú‡¶æ‡¶Æ‡¶æ‡¶≤‡¶™‡ßÅ‡¶∞", "‡¶Æ‡¶Ø‡¶º‡¶Æ‡¶®‡¶∏‡¶ø‡¶Ç‡¶π", "‡¶®‡ßá‡¶§‡ßç‡¶∞‡¶ï‡ßã‡¶£‡¶æ", "‡¶∂‡ßá‡¶∞‡¶™‡ßÅ‡¶∞"]
    };

    let visited = JSON.parse(localStorage.getItem('bdTravelData')) || [];
    let audioCtx;

    function initAudio() {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }

    function playSound(type) {
        initAudio();
        try {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.frequency.setValueAtTime(type === 'check' ? 800 : 400, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
            osc.start(); osc.stop(audioCtx.currentTime + 0.2);
        } catch (e) {}
    }

    function render() {
        const content = document.getElementById('mainContent');
        content.innerHTML = '';
        for (const div in divisions) {
            const wrap = document.createElement('div');
            wrap.innerHTML = `<div class="division-header"><b>${div}</b> <span id="c-${div}" style="font-size:0.75rem; opacity:0.6;">0/${divisions[div].length}</span></div>`;
            const grid = document.createElement('div');
            grid.className = 'district-grid';
            divisions[div].forEach(d => {
                const card = document.createElement('div');
                card.className = `district-card ${visited.includes(d) ? 'completed' : ''}`;
                card.innerHTML = `<div class="checkbox"></div><span>${d}</span>`;
                card.onclick = () => {
                    initAudio();
                    if (visited.includes(d)) {
                        visited = visited.filter(item => item !== d);
                    } else {
                        visited.push(d);
                        playSound('check');
                    }
                    saveData();
                    render();
                    checkSpecialBadges();
                };
                grid.appendChild(card);
            });
            wrap.appendChild(grid);
            content.appendChild(wrap);
            updateDivCount(div);
        }
        updateStats();
    }

    function saveData() { localStorage.setItem('bdTravelData', JSON.stringify(visited)); }

    function updateStats() {
        const count = visited.length;
        const p = Math.round((count / 64) * 100);
        document.getElementById('vCount').innerText = count;
        document.getElementById('percent').innerText = p + '%';
        document.getElementById('progressBar').style.width = p + '%';
        
        const walkerImg = document.getElementById('walker-img');
        if (p <= 15) walkerImg.src = "https://cdn-icons-png.flaticon.com/512/10815/10815893.png";
        else if (p <= 45) walkerImg.src = "https://cdn-icons-png.flaticon.com/512/2972/2972185.png";
        else if (p <= 85) walkerImg.src = "https://cdn-icons-png.flaticon.com/512/744/744465.png";
        else walkerImg.src = "https://cdn-icons-png.flaticon.com/512/201/201623.png";

        [1, 10, 30, 50, 64].forEach(m => {
            document.getElementById(`badge-${m}`).classList.toggle('active', count >= m);
        });
    }

    function checkSpecialBadges() {
        // ‡¶π‡¶ø‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞
        const hills = ["‡¶¨‡¶æ‡¶®‡ßç‡¶¶‡¶∞‡¶¨‡¶æ‡¶®", "‡¶∞‡¶æ‡¶ô‡ßç‡¶ó‡¶æ‡¶Æ‡¶æ‡¶ü‡¶ø", "‡¶ñ‡¶æ‡¶ó‡¶°‡¶º‡¶æ‡¶õ‡¶°‡¶º‡¶ø"];
        const hasHills = hills.every(h => visited.includes(h));
        const hillBadge = document.getElementById('badge-hill');
        if(hasHills && !hillBadge.classList.contains('active')) {
            showCeleb("‚õ∞Ô∏è ‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø '‡¶π‡¶ø‡¶≤ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞' ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!");
        }
        hillBadge.classList.toggle('active', hasHills);

        // ‡¶¨‡¶ø‡¶ö ‡¶≤‡¶æ‡¶≠‡¶æ‡¶∞
        const beaches = ["‡¶ï‡¶ï‡ßç‡¶∏‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞", "‡¶™‡¶ü‡ßÅ‡¶Ø‡¶º‡¶æ‡¶ñ‡¶æ‡¶≤‡ßÄ", "‡¶≠‡ßã‡¶≤‡¶æ"];
        const hasBeaches = beaches.every(b => visited.includes(b));
        const beachBadge = document.getElementById('badge-beach');
        if(hasBeaches && !beachBadge.classList.contains('active')) {
            showCeleb("üèñÔ∏è ‡¶Ö‡¶≠‡¶ø‡¶®‡¶®‡ßç‡¶¶‡¶®! ‡¶Ü‡¶™‡¶®‡¶ø '‡¶¨‡¶ø‡¶ö ‡¶≤‡¶æ‡¶≠‡¶æ‡¶∞' ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ú ‡¶Ö‡¶∞‡ßç‡¶ú‡¶® ‡¶ï‡¶∞‡ßá‡¶õ‡ßá‡¶®!");
        }
        beachBadge.classList.toggle('active', hasBeaches);
    }

    function updateDivCount(divName) {
        const count = divisions[divName].filter(d => visited.includes(d)).length;
        const el = document.getElementById(`c-${divName}`);
        if(el) el.innerText = `${count}/${divisions[divName].length}`;
    }

    function openShareCard() {
        const count = visited.length;
        let rank = count >= 64 ? "‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶∞‡¶æ‡¶ú‡¶æ üëë" : count >= 50 ? "‡¶ü‡ßç‡¶∞‡¶æ‡¶≠‡ßá‡¶≤‡¶æ‡¶∞ ‚úàÔ∏è" : count >= 30 ? "‡¶Ö‡¶≠‡¶ø‡¶Ø‡¶æ‡¶§‡ßç‡¶∞‡ßÄ üöó" : count >= 10 ? "‡¶™‡¶∞‡ßç‡¶Ø‡¶ü‡¶ï üö≤" : "‡¶®‡¶¨‡¶ø‡¶∂";
        document.getElementById('cardCount').innerText = count;
        document.getElementById('cardRank').innerText = rank;
        document.getElementById('shareModal').style.display = 'flex';
    }

    function exportData() {
        if(visited.length === 0) return alert("‡¶Ü‡¶ó‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ú‡ßá‡¶≤‡¶æ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®!");
        const code = btoa(unescape(encodeURIComponent(JSON.stringify(visited))));
        navigator.clipboard.writeText(code).then(() => {
            alert("‚úÖ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶è‡¶ü‡¶ø ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡ßã‡¶ü‡¶™‡ßç‡¶Ø‡¶æ‡¶° ‡¶¨‡¶æ ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßÅ‡¶®‡•§");
        }).catch(() => prompt("‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®:", code));
    }

    function importData() {
        const code = prompt("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ï‡¶Ü‡¶™ ‡¶ï‡ßã‡¶°‡¶ü‡¶ø ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡¶ø‡¶®:");
        if(code) {
            try {
                visited = JSON.parse(decodeURIComponent(escape(window.atob(code))));
                saveData(); render(); checkSpecialBadges();
                alert("‚ú® ‡¶™‡ßç‡¶∞‡¶ó‡ßç‡¶∞‡ßá‡¶∏ ‡¶´‡¶ø‡¶∞‡ßá ‡¶è‡¶∏‡ßá‡¶õ‡ßá!");
            } catch(e) { alert("‚ùå ‡¶≠‡ßÅ‡¶≤ ‡¶ï‡ßã‡¶°!"); }
        }
    }

    function resetData() {
        if(confirm("‡¶∏‡¶¨ ‡¶≠‡ßç‡¶∞‡¶Æ‡¶£ ‡¶°‡ßá‡¶ü‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡¶§‡ßá ‡¶ö‡¶æ‡¶®?")) {
            visited = []; saveData(); render();
        }
    }

    function showCeleb(msg) {
        document.getElementById('celebMsg').innerText = msg;
        document.getElementById('celebration').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
        playSound('milestone');
    }

    function closeCeleb() {
        document.getElementById('celebration').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }

    render();
    checkSpecialBadges();
</script>
</body>
</html>
